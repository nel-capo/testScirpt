/* Lightning-inspired theme */
:root{
    --bg: #f3f2f2;
    --panel: #ffffff;
    --panel-2:#fbfbfb;
    --text: #1e1e1e;
    --muted:#5f6a7d;
    --brand:#0176d3;     /* Salesforce blue */
    --brand-2:#0b5cab;
    --danger:#ba0517;
    --success:#2e844a;
    --warning:#fe9339;
    --border: #d9d9d9;
    --shadow: 0 2px 10px rgba(3,45,96,.08);
    --radius: 10px;
    --scroll-hint: linear-gradient(90deg, rgba(243,242,242,0.0), rgba(243,242,242,0.95));
}
*{box-sizing:border-box}
html,body{height:100%}
body{
    margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    background: var(--bg);
    color:var(--text);
}
.container{max-width:1280px; margin:0 auto; padding:24px;}
header{
    position:sticky; top:0; z-index:10; backdrop-filter: blur(8px);
    background: rgba(255,255,255,.8);
    border-bottom:1px solid var(--border);
}
header .inner{display:flex; gap:16px; align-items:center; justify-content:space-between; padding:14px 24px;}
h1{font-size: clamp(20px, 3vw, 28px); margin:0; letter-spacing:.2px}
.badge{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; background:var(--panel); border:1px solid var(--border); border-radius:999px; box-shadow:var(--shadow); color:var(--muted)}
.brand-dot{width:10px;height:10px;border-radius:999px;background:var(--brand); box-shadow:0 0 0 3px rgba(1,118,211,.18)}

/* Header utilities */
.header-utils{display:flex; gap:10px; align-items:center}
.notify{position:relative}
.notify-btn{border:1px solid var(--border); background:var(--panel); border-radius:999px; padding:8px 10px; cursor:pointer}
.notify-btn:hover{background:#f8f8f8}
.notify-dot{position:absolute; top:-4px; right:-4px; background:#ba0517; color:#fff; border-radius:999px; padding:2px 6px; font-size:11px; display:none}
.notify.open .notify-dot{display:none}
.notify-list{position:absolute; right:0; top:40px; width:min(520px, 92vw); max-height:70vh; overflow:auto; background:var(--panel); border:1px solid var(--border); border-radius:12px; box-shadow:var(--shadow); display:none}
.notify.open .notify-list{display:block}
.notify-item{padding:10px 12px; border-bottom:1px solid #eee}
.notify-item:last-child{border-bottom:0}
.notify-item .meta{font-size:12px; color:var(--muted)}

/* Panels */
.panel{background: var(--panel); border:1px solid var(--border); border-radius:var(--radius); padding:18px; box-shadow:var(--shadow)}

/* Summary cards */
.summary{display:grid; grid-template-columns:repeat(5, minmax(0,1fr)); gap:12px;}
.card{background: var(--panel-2); border:1px solid var(--border); border-radius:var(--radius); padding:16px; box-shadow:var(--shadow)}
.card h3{margin:0; font-size:12px; color:var(--muted); font-weight:700; letter-spacing:.2px; text-transform:uppercase}
.card .num{font-size:26px; font-weight:800; margin-top:8px; color:#032d60}
.card button{all:unset; display:inline-flex; align-items:center; gap:8px; margin-top:10px; cursor:pointer; font-size:12px; color:var(--brand)}

/* Progress bar */
.progress-wrap{margin-top:12px;}
.progress{height:10px; width:100%; background:#ecebea; border:1px solid var(--border); border-radius:999px; overflow:hidden}
.progress .seg{height:100%; float:left}
.seg.review{background:#5f6a7d}
.seg.ready{background:#0b5cab}
.seg.failed{background:#ba0517}
.seg.passed{background:#2e844a}
.legend{display:flex; gap:18px; flex-wrap:wrap; margin-top:8px; font-size:12px; color:var(--muted)}
.legend .dot{width:10px; height:10px; border-radius:999px; display:inline-block; margin-right:6px}

/* Collapsible create panel */
details.collapsible{border:1px solid var(--border); border-radius:var(--radius); background: var(--panel)}
details.collapsible>summary{list-style:none; cursor:pointer; padding:14px 18px; display:flex; align-items:center; justify-content:space-between; gap:10px}
details.collapsible>summary::-webkit-details-marker{display:none}
details.collapsible[open] .chev{transform:rotate(90deg)}
.chev{transition:transform .2s ease}

form{display:grid; grid-template-columns:repeat(12,1fr); gap:12px; padding:0 18px 18px}
.field{display:flex; flex-direction:column; gap:6px}
.field label{font-size:12px; color:var(--muted)}
input[type="text"], input[type="number"], input[type="date"], select, textarea{
    width:100%; padding:10px 12px; border-radius:8px; border:1px solid var(--border); background:#fff; color:var(--text);
    outline:none; transition:border .2s ease, box-shadow .2s ease;
}
textarea.longtext{min-height:120px; resize:vertical; line-height:1.45}
input:focus, select:focus, textarea:focus{border-color:var(--brand); box-shadow:0 0 0 3px rgba(1,118,211,.16)}

/* Scrollbox for long text cells */
.scrollbox{max-height:120px; overflow:auto; padding-right:6px; min-width: 350px;}
.scrollbox::after{content:""; position:absolute; left:0; right:0; bottom:0; height:26px; background:linear-gradient(180deg, rgba(255,255,255,0), rgba(255,255,255,1)); pointer-events:none}

/* Buttons */
.actions{display:flex; gap:10px; grid-column:span 12}
.btn{border:1px solid var(--border); padding:9px 12px; border-radius:8px; background:#fff; color:#032d60; cursor:pointer; transition:transform .04s ease, background .2s ease, border .2s ease}
.btn:hover{background:#f8f8f8}
.btn:active{transform:translateY(1px)}
.btn.primary{background:#eef4ff; border-color:#cfe0ff}
.btn.brand{background:#0176d3; color:#fff; border-color:#0169be}
.btn.ghost{background:transparent}
.btn.danger{background:#ffe5e8; border-color:#ffd0d4; color:#8e1921}

/* Filters (dynamic builder) */
.filters{display:flex; flex-wrap:wrap; gap:10px; align-items:center}
.filter-builder{display:flex; flex-direction:column; gap:8px; width:100%}
.filter-row{display:flex; gap:8px; align-items:center; background:var(--panel-2); border:1px solid var(--border); padding:8px; border-radius:8px}
.filter-row .remove{border-radius:999px}
.add-filter{display:flex; gap:8px; align-items:center}
.add-filter select{min-width:220px}

/* Table / list */
.table-scroll{position:relative}
.table-scroll .hover-zone{position:absolute; top:0; bottom:0; width:40px; opacity:.0; transition:opacity .2s ease; z-index:2}
.table-scroll .hover-zone.left{left:0; background-image:var(--scroll-hint);}
.table-scroll .hover-zone.right{right:0; background-image:linear-gradient(270deg, rgba(243,242,242,0.0), rgba(243,242,242,0.95));}
.table-scroll:hover .hover-zone{opacity:1}
.table-wrap{overflow:auto; border-radius:12px}
/* Wider table to show long text columns better */
.table{width:100%; min-width:1650px; border-collapse:separate; border-spacing:0 8px;}
.thead th{font-size:12px; color:var(--muted); text-align:left; padding:8px 10px}
.row{background: var(--panel); border:1px;  border-radius:12px;}
.row td{padding:12px 10px; vertical-align:top}
.row td:first-child{border-top-left-radius:12px; border-bottom-left-radius:12px}
.row td:last-child{border-top-right-radius:12px; border-bottom-right-radius:12px}
tr.row {
    background: #f1f1f1;
}
button#sortDirBtn {
    border: none;
}

/* Wider long-text columns */
th.col-desc, td.col-desc{width:520px}
th.col-test, td.col-test{width:440px}
th.col-acc,  td.col-acc{width:420px}
th.col-comments, td.col-comments{width:380px}

.pill{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; font-size:12px; font-weight:600; border:1px solid var(--border)}
.pill.low{background:#f2f7f3}
.pill.medium{background:#f7f5ef}
.pill.high{background:#fff1ee}
.pill.ur{background:#f2f3f5}
.pill.rft{background:#eef3fb}
.pill.fqc{background:#ffe8ea}
.pill.pqc{background:#ecfaf1}

.mono {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    text-align: center;
    align-content: center;
}
.muted{color:var(--muted)}
.nowrap {
    white-space: nowrap;
    text-align: center;
    align-content: center;
}
button#backToList {
    background: #0a223e;
    color: #ffaa21;
}

.actions-col{display:flex; gap:8px}

/* Detail view (standalone & FS) */
#detailView{display:none}
.kv{display:grid; grid-template-columns: 260px 1fr; gap:10px; padding:8px 0; border-bottom:1px dashed var(--border)}
.kv .k{color:var(--muted); font-weight:600}
.kv .v{min-height:24px}
textarea.detail-long{max-height:500px;}

/* Comments panel */
.comments-panel{margin-top:16px}
.comment-item{border:1px solid var(--border); border-radius:12px; padding:10px 12px; background:#fff; margin:8px 0}
.comment-header{display:flex; align-items:center; gap:10px; font-size:12px; color:var(--muted)}
.comment-body{margin-top:6px; line-height:1.45}
.comment-actions{margin-top:8px}
.comment-actions button{font-size:12px; padding:6px 8px}
.reply-group{margin-left:24px}
.comment-meta{font-size:12px; color:var(--muted)}
.replying-badge{font-size:12px; color:var(--brand); margin-left:6px}

/* Fullscreen split-view */
#listPanel:fullscreen{
    margin:0; border-radius:0; width:100vw; height:100vh;
    display:flex; flex-direction:column;
}
#listPanel:fullscreen .fs-split{
    display:grid;  gap:12px;
    flex:1; min-height:0;
}
#listPanel:fullscreen .fs-left{display:flex; flex-direction:column; min-width:0; min-height:0}
#listPanel:fullscreen .fs-left .table-scroll{flex:1; display:flex; flex-direction:column; min-height:0}
#listPanel:fullscreen .fs-left .table-wrap{flex:1}
#fsDetailPane{ display:none; }
#listPanel:fullscreen #fsDetailPane{
    display:block; overflow:auto;
    border:1px solid var(--border); border-radius:var(--radius);
    background: var(--panel);
    padding:12px;
}

/* Overlay (used for registration) */
.overlay{position:fixed; inset:0; background:rgba(0,0,0,.35); display:none; align-items:center; justify-content:center; z-index:1000}
.overlay.show{display:flex}
.modal{width:min(640px, 92vw); max-height:88vh; overflow:auto; background: var(--panel); border:1px solid var(--border); border-radius:12px; padding:16px; box-shadow:var(--shadow)}
.modal h2{margin:6px 4px 14px}

/* Toast */
.toast-wrap{position:fixed; bottom:18px; right:18px; display:flex; flex-direction:column; gap:8px; z-index:1100}
.toast{padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:#fff; box-shadow:var(--shadow); font-size:14px}
.toast.success{border-color:#cce8d8}
.toast.error{border-color:#f5c2c7}

/* Custom scrollbars */
*{scrollbar-width:thin; scrollbar-color:#c9d3e0 #f1f1f1}
*::-webkit-scrollbar{height:10px; width:10px}
*::-webkit-scrollbar-thumb{background:#c9d3e0; border-radius:10px}
*::-webkit-scrollbar-track{background:#f1f1f1}

/* Responsive */
@media (max-width: 980px){
    .summary{grid-template-columns:repeat(2, minmax(0,1fr));}
}
@media (max-width: 760px){
    form{grid-template-columns:repeat(6,1fr)}
    .thead{display:none}
    .row{display:grid; grid-template-columns: 1fr;}
    .row td{display:block}
    .actions-col{justify-content:flex-end}
    .kv{grid-template-columns: 1fr}
}
